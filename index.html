<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TextZ Ombie Shrine</title>
  <link rel="shortcut icon" href="assets/logo5.png" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Hero + Music Wrapper -->
  <div id="heroMusicWrapper">
    <!-- Hero Section -->
    <section id="hero" class="container text-center py-5">
      <h1 class="display-1"><strong>🧟‍♂️ TextZ Ombie 🧟‍♂️</strong></h1>
      <p class="lead mt-3 zombie-text">Frontend Challenge: Halloween Edition 🦇<br>Project Expansion 🧛</p>
      <button class="btn btn-primary mt-4 zombie-button" onclick="summonZombies()">Summon the Horde</button>

      <div class="zombie-frame">
        <div class="emoji-border-top">🧛‍♂️🧟💀🎃🍬🕷️🧠</div>
        <img id="zombieImage" src="assets/ZombieHorde01.png" alt="Zombie Horde" class="img-fluid">
        <div class="emoji-border-bottom">🧛‍♂️🧟💀🎃🍬🕷️🧠</div>
      </div>
    </section>

    <!-- Music Section -->
    <section id="music" class="container py-5 text-center">
      <h2 class="display-4 mb-4"><strong>Plague Of Rot</strong></h2>

      <div id="audioBox">
        <audio id="zombieAudio">
          <source src="Audio/Plague of Zombies V1.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>

        <div class="audio-visualizer-wrapper">
          <canvas id="waveLeft" class="wave-canvas"></canvas>

          <div class="audio-controls d-flex justify-content-center gap-3">
            <button onclick="playAudio()" class="btn btn-outline-light">▶️ Play</button>
            <button onclick="pauseAudio()" class="btn btn-outline-light">⏸️ Pause</button>
            <button onclick="stopAudio()" class="btn btn-outline-light">⏹️ Stop</button>
          </div>

          <canvas id="waveRight" class="wave-canvas"></canvas>
        </div>
      </div>
    </section>
  </div>

  <!-- Asset Gallery -->
  <section id="assets" class="container-fluid py-5">
    <!-- Bat Swarm Above Heading -->
    <div id="batSwarm" class="swarm-zone"></div>

    <h2 class="display-4 text-center mb-5"><strong>Asset Examples</strong></h2>

    <!-- Spider Swarm Below Heading -->
    <div id="spiderSwarm" class="swarm-zone"></div>

    <div class="row justify-content-center">
      <div class="col-md-3 mb-4">
        <img src="assets/Asset01.png" alt="Asset 1" class="img-fluid">
      </div>
      <div class="col-md-3 mb-4">
        <img src="assets/Asset02.png" alt="Asset 2" class="img-fluid">
      </div>
      <div class="col-md-3 mb-4">
        <img src="assets/Asset03.png" alt="Asset 3" class="img-fluid">
      </div>
      <div class="col-md-3 mb-4">
        <img src="assets/Asset04.png" alt="Asset 4" class="img-fluid">
      </div>
    </div>
  </section>

  <!-- Zombie Chase Animation -->
  <section id="zombieChase">
    <div id="chaseContainer"></div>
  </section>

  <!-- Footer -->
  <footer id="footer" class="bg-dark text-light py-4">
    <div class="container text-center">
      <p class="mb-2">2025 ASXGTR - Project Alpha 1.0 - TextZ Ombie</p>
      <ul class="list-inline">
        <li class="list-inline-item">
          <a href="https://discord.gg/jYccCCf68A" target="_blank" class="footer-link">🧠 Summon</a>
        </li>
        <li class="list-inline-item">
          <a href="https://dev.to/asx" target="_blank" class="footer-link">☠️ Grave Digging</a>
        </li>
        <li class="list-inline-item">
          <a href="https://github.com/ASXGTR" target="_blank" class="footer-link">🧙‍♂️🧹 The Crypt</a>
        </li>
        <li class="list-inline-item">
          <a href="#" onclick="showComingSoon()" class="footer-link">🧟‍♀️🧟 Portal</a>
        </li>
      </ul>
      <div id="comingSoonPanel" style="display:none; margin-top:15px;">
        <p class="text-warning">🧟 Coming Soon: Steam Shrine Awakening 🧟</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Audio Setup
    const audioElement = document.getElementById("zombieAudio");
    const canvasLeft = document.getElementById("waveLeft");
    const canvasRight = document.getElementById("waveRight");
    const ctxLeft = canvasLeft.getContext("2d");
    const ctxRight = canvasRight.getContext("2d");

    let audioCtx;
    let audioSource;
    let analyser;
    let animationId;

    function initAudioContext() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        audioSource = audioCtx.createMediaElementSource(audioElement);
        analyser = audioCtx.createAnalyser();
        audioSource.connect(analyser);
        analyser.connect(audioCtx.destination);
        analyser.fftSize = 64;
      }
    }

    function drawWaveform() {
      const bufferLength = analyser.frequencyBinCount;
      const dataArray = new Uint8Array(bufferLength);

      function animate() {
        animationId = requestAnimationFrame(animate);
        analyser.getByteFrequencyData(dataArray);

        ctxLeft.clearRect(0, 0, canvasLeft.width, canvasLeft.height);
        ctxRight.clearRect(0, 0, canvasRight.width, canvasRight.height);

       for (let i = 0; i < bufferLength; i++) {
  const barHeight = dataArray[i] / 2;
  const x = i * 4;

  // Left waveform (normal)
  ctxLeft.fillStyle = "#9acd32";
  ctxLeft.fillRect(x, canvasLeft.height - barHeight, 3, barHeight);

  // Right waveform (mirrored)
  ctxRight.save();
  ctxRight.translate(canvasRight.width, 0);
  ctxRight.scale(-1, 1);
  ctxRight.fillStyle = "#9acd32";
  ctxRight.fillRect(x, canvasRight.height - barHeight, 3, barHeight);
  ctxRight.restore();
}

      animate();
    }

    function playAudio() {
      initAudioContext();
      audioCtx.resume();
      audioElement.play();
      canvasLeft.style.display = "block";
      canvasRight.style.display = "block";
      drawWaveform();
    }

    function pauseAudio() {
      audioElement.pause();
      canvasLeft.style.display = "none";
      canvasRight.style.display = "none";
      cancelAnimationFrame(animationId);
    }

    function stopAudio() {
      audioElement.pause();
      audioElement.currentTime = 0;
      canvasLeft.style.display = "none";
      canvasRight.style.display = "none";
      cancelAnimationFrame(animationId);
    }

    // Emoji Swarm Ritual
    function summonZombies() {
      const hordeContainer = document.createElement("div");
      hordeContainer.style.position = "absolute";
      hordeContainer.style.top = "0";
      hordeContainer.style.left = "0";
      hordeContainer.style.width = "100%";
      hordeContainer.style.height = "100%";
      hordeContainer.style.pointerEvents = "none";
      document.body.appendChild(hordeContainer);

      const musicSection = document.getElementById("music");
      const musicTop = musicSection.getBoundingClientRect().top + window.scrollY;

      for (let i = 0; i < 200; i++) {
                const zombie = document.createElement("div");
        zombie.textContent = "🧟";
        zombie.style.position = "absolute";
        zombie.style.left = `${Math.random() * window.innerWidth}px`;
        zombie.style.top = `-50px`;
        zombie.style.fontSize = "24px";
        zombie.style.zIndex = "9999";

        const speed = 1 + Math.random() * 3;
        let y = -50;

        const interval = setInterval(() => {
          y += speed;
          zombie.style.top = `${y}px`;
          if (y > musicTop) {
            clearInterval(interval);
            zombie.remove();
          }
        }, 20);

        hordeContainer.appendChild(zombie);
      }
    }

    function showComingSoon() {
      const panel = document.getElementById("comingSoonPanel");
      panel.style.display = panel.style.display === "none" ? "block" : "none";
    }

    // Zombie Chase Ritual
    let zombieCount = 1;
    function updateChase() {
      const container = document.getElementById("chaseContainer");
      const zombies = "🧟".repeat(zombieCount);
      container.innerHTML = `🏃 ${zombies}`;
      zombieCount++;
      if (zombieCount > 7) zombieCount = 1;
    }
    setInterval(updateChase, 10000);
    updateChase();

    // Bat & Spider Swarms
    function spawnSwarm(containerId, emoji, count) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      const swarm = document.createElement("span");
      swarm.textContent = emoji.repeat(count);
      container.appendChild(swarm);
    }

    let batCount = 5;
    let spiderCount = 7;

    function loopSwarm() {
      spawnSwarm("batSwarm", "🦇", batCount);
      spawnSwarm("spiderSwarm", "🕷️", spiderCount);
    }

    setInterval(loopSwarm, 12000);
    loopSwarm();
  </script>
</body>
</html>
